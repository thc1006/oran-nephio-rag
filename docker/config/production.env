# O-RAN × Nephio RAG 生產環境配置
# 高性能、高安全性的生產環境設定

# ============ 應用基本設定 ============
APP_ENV=production
DEBUG=false
LOG_LEVEL=INFO
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# ============ 安全金鑰 ============
# 請設定強密碼的 Secret Key
SECRET_KEY=

# ============ API 金鑰 ============
# 請設定您的 Anthropic API Key
ANTHROPIC_API_KEY=

# ============ Claude 模型設定 ============
CLAUDE_MODEL=claude-3-sonnet-20240229
CLAUDE_MAX_TOKENS=4000
CLAUDE_TEMPERATURE=0.1
CLAUDE_TOP_P=1.0

# ============ 向量資料庫設定 ============
VECTOR_DB_PATH=/app/oran_nephio_vectordb
COLLECTION_NAME=oran_nephio_official_prod
EMBEDDINGS_CACHE_PATH=/app/embeddings_cache

# ============ 文本處理設定 ============
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_RETRIES=5
REQUEST_TIMEOUT=60

# ============ 檢索設定 ============
RETRIEVER_K=6
RETRIEVER_FETCH_K=20
RETRIEVER_LAMBDA_MULT=0.7

# ============ 日誌設定 ============
LOG_FILE=/app/logs/oran_nephio_rag.log
LOG_FORMAT=json
LOG_ROTATION=true
LOG_MAX_SIZE=500MB
LOG_BACKUP_COUNT=30
LOG_COMPRESS=true

# ============ Redis 設定 (高可用) ============
REDIS_HOST=redis-master
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TIMEOUT=10
REDIS_CONNECTION_POOL_SIZE=50
REDIS_SENTINEL_HOSTS=redis-sentinel:26379
REDIS_SENTINEL_PASSWORD=

# ============ 自動同步設定 ============
AUTO_SYNC_ENABLED=true
SYNC_INTERVAL_HOURS=6
SYNC_ON_STARTUP=true
SYNC_BACKUP_ENABLED=true

# ============ 生產服務器設定 ============
WORKERS=4
WORKER_TIMEOUT=120
WORKER_CLASS=sync
MAX_REQUESTS=2000
MAX_REQUESTS_JITTER=200
PRELOAD_APP=true
WORKER_CONNECTIONS=1000
KEEPALIVE=2

# ============ 安全設定 ============
VERIFY_SSL=true
SSL_TIMEOUT=60
ALLOW_CORS=false
CORS_ORIGINS=
SECURE_COOKIES=true
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# ============ 資料庫設定 (生產用) ============
DATABASE_URL=
DATABASE_POOL_SIZE=20
DATABASE_POOL_TIMEOUT=60
DATABASE_POOL_OVERFLOW=10
DATABASE_POOL_RECYCLE=3600

# ============ 監控設定 ============
ENABLE_PROMETHEUS_METRICS=true
PROMETHEUS_METRICS_PORT=9100
METRICS_PATH=/metrics
HEALTH_CHECK_PATH=/health

# ============ 文件處理設定 ============
MIN_CONTENT_LENGTH=500
MIN_EXTRACTED_CONTENT_LENGTH=100
MIN_LINE_LENGTH=3
MAX_LINE_MERGE_LENGTH=80
CONTENT_PREVIEW_LENGTH=200
MIN_KEYWORD_COUNT=2

# ============ 重試和延遲設定 ============
RETRY_DELAY_BASE=2.0
MAX_RETRY_DELAY=30
REQUEST_DELAY=1.0

# ============ 快取設定 ============
CACHE_ENABLED=true
CACHE_TTL=7200
CACHE_MAX_SIZE=10000
CACHE_COMPRESSION=true

# ============ 效能調優 ============
CONNECTION_TIMEOUT=30
READ_TIMEOUT=300
WRITE_TIMEOUT=60
POOL_TIMEOUT=30

# ============ 備份設定 ============
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
S3_ENDPOINT=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=oran-rag-backup
BACKUP_ENCRYPTION_KEY=

# ============ 告警設定 ============
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_HOST=
ALERT_EMAIL_PORT=587
ALERT_EMAIL_USER=
ALERT_EMAIL_PASSWORD=
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=

SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#alerts

# ============ 限流設定 ============
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_SECOND=10
RATE_LIMIT_BURST=20
RATE_LIMIT_WHITELIST=

# ============ Elasticsearch 設定 ============
ELASTICSEARCH_HOSTS=
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX=oran-rag-logs-prod
ELASTICSEARCH_SSL_VERIFY=true

# ============ 資料路徑設定 ============
DATA_PATH=/data/oran-rag
LOGS_PATH=/data/oran-rag/logs
VECTORDB_PATH=/data/oran-rag/vectordb
EMBEDDINGS_PATH=/data/oran-rag/embeddings

# ============ 容器設定 ============
VERSION=latest
APP_REPLICAS=3

# ============ 網路設定 ============
ALLOWED_HOSTS=your-domain.com,www.your-domain.com
TRUSTED_PROXIES=172.20.0.0/16,172.21.0.0/16

# ============ SSL/TLS 設定 ============
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_CHAIN_PATH=/etc/nginx/ssl/chain.pem

# ============ 監控告警閾值 ============
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=85
DISK_ALERT_THRESHOLD=90
RESPONSE_TIME_ALERT_THRESHOLD=5.0
ERROR_RATE_ALERT_THRESHOLD=5.0

# ============ 自動擴容設定 ============
AUTO_SCALING_ENABLED=false
AUTO_SCALING_MIN_REPLICAS=2
AUTO_SCALING_MAX_REPLICAS=10
AUTO_SCALING_CPU_TARGET=70
AUTO_SCALING_MEMORY_TARGET=80

# ============ 災難恢復設定 ============
DR_ENABLED=true
DR_BACKUP_FREQUENCY=daily
DR_BACKUP_RETENTION=90
DR_RECOVERY_POINT_OBJECTIVE=1h
DR_RECOVERY_TIME_OBJECTIVE=4h